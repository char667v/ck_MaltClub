---
import AnmeldelsesCard from "../components/AnmeldelsesCard.astro";
---

<script>
  document.addEventListener("DOMContentLoaded", function () {
  let currentIndex = 0;
  const cardsContainer = document.querySelector('.cards-container');
  const cardItems = document.querySelectorAll('.card-item');

  // Beregn bredden af et kort dynamisk
  const cardWidth = cardItems[0].offsetWidth;

  // Funktion til at opdatere antallet af kort, der skal flyttes
  function getSlideWidth() {
    // Flyt 2 kort ad gangen på md skærmstørrelse (768px til 1023px)
    if (window.innerWidth >= 768 && window.innerWidth < 1024) {
      return cardWidth * 2; // Flyt 2 kort ad gangen på md
    } else {
      return cardWidth; // Flyt 1 kort ad gangen på xs, sm, lg, xl og 2xl
    }
  }

  // Beregn det totale antal kort
  const totalCards = cardItems.length;

  // Funktion til at opdatere transformeringen af kortene
  function updateCardPosition() {
    const slideWidth = getSlideWidth(); // Brug den dynamiske slideWidth
    cardsContainer.style.transform = `translateX(-${currentIndex * slideWidth}px)`;
  }

  // Navigationsknap til venstre
  document.querySelector('.prev-button').addEventListener('click', function () {
    currentIndex = (currentIndex === 0) ? totalCards - 1 : currentIndex - 1;
    updateCardPosition();
  });

  // Navigationsknap til højre
  document.querySelector('.next-button').addEventListener('click', function () {
    currentIndex = (currentIndex + 1) % totalCards;
    updateCardPosition();
  });

  // Opdater kortposition, hvis vinduet ændrer størrelse
  window.addEventListener('resize', updateCardPosition);
});

</script>

<div id="anmeld" class="bg-primary-500 pt-xl py-lg px-ml lg:p-2xl">
  <div id="sektion4" class="opacity-0">
    <h2 class="text-h1-mobile md:text-h2-tablet lg:text-h2-desktop text-accent-500 text-center ">
        Læs anmeldelser af vores produkter
    </h2>

    <div class="relative overflow-hidden">
      <!-- Cards Container -->
      <div class="cards-container flex transition-transform duration-500 pt-xl">
        <div class="card-item flex-shrink-0 w-full md:w-full  lg:w-1/2 xl:w-1/3 px-2">
          <AnmeldelsesCard
            img="img/img_profil/Morten.webp" 
            name="Morten Damsgaard"
            description="Jeg valgte din netbutik, fordi den har for enhver smag og præference. Hurtig levering, ordre intakt. Tusind tak."
            beer="svg/beer_rate1.svg"/>
        </div>
        <div class="card-item flex-shrink-0 w-full md:w-full lg:w-1/2 xl:w-1/3 px-2">
          <AnmeldelsesCard
            img="img/img_profil/Izzy.webp"  
            name="Izzy Samson"
            description="Gode priser og et bredt udvalg at vælge imellem. Godt koncept at det er muligt at vælge hvilken dag leveringen skal finde sted."
            beer="svg/beer_rate2.svg"/>
        </div>
        <div class="card-item flex-shrink-0 w-full md:w-full  lg:w-1/2 xl:w-1/3 px-2">
          <AnmeldelsesCard
            img="img/img_profil/Maire.webp"  
            name="Maire Nathanials"
            description="Jeg foretrækker leverancer før kl. 18:00, da levering sent på aftenen ikke passer mig."
            beer="svg/beer_rate3.svg"/>
        </div>
        <div class="card-item flex-shrink-0 w-full md:w-full  lg:w-1/2 xl:w-1/3 px-2">
          <AnmeldelsesCard
            img="img/img_profil/Andreas.webp" 
            name="Andreas Martinez"
            description="Rigtig gode priser og et bredt udvalg af produkter. Man bliver overrasket hver gang!"
            beer="svg/beer_rate4.svg"/>
        </div>
        <div class="card-item flex-shrink-0 w-full md:w-full lg:w-1/2 xl:w-1/3 px-2">
          <AnmeldelsesCard
            img="img/img_profil/Lukas.webp" 
            name="Lukas Jensen"
            description="Et bredt, men eksklusivt udvalg, der bare emmer af passion og sans for detaljen."
            beer="svg/beer_rate1.svg"/>
        </div>
        <div class="card-item flex-shrink-0 w-full md:w-full  lg:w-1/2 xl:w-1/3 px-2">
          <AnmeldelsesCard
            img="img/img_profil/Lau.webp" 
            name="Lau Mathiesen"
            description="En kollektion af produkter, der er skræddersyet til den kræsne forbruger."
            beer="svg/beer_rate1.svg"/>
        </div>
      </div>

      
    </div>

  </div>
  <!-- Navigation Controls (Arrows) -->
  <div class="relative">
    <button 
      class="prev-button absolute -left-3 sm:left-xxxs -top-60 md:left-ml  lg:-left-xl text-accent-800 p-2 sm:p-3 bg-neutral-300 rounded-full shadow-lg">
      <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
    </button>
  
    <button 
      class="next-button absolute -right-3 sm:right-xxxs -top-60 md:right-ml lg:-right-xl text-accent-800 p-2 sm:p-3 bg-neutral-300 rounded-full shadow-lg">
      <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
      </svg>
    </button>
  </div>
  
</div>
